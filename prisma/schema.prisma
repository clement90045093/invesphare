generator client {
  provider = "prisma-client"
  output   = "../src/app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  name      String?
  balance   Float    @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Deposit {
  id                Int       @id @default(autoincrement())
  userId            String?
  amount            Float
  currency          String
  address           String
  providerAddressId String?
  reference         String    @unique
  status            String    @default("pending")
  txHash            String?
  receivedAmount    Float?
  providerPayload   Json?
  expiresAt         DateTime?
  createdAt         DateTime  @default(now())
  confirmedAt       DateTime?
}

model Investment {
  id              Int       @id @default(autoincrement())
  userId          String?
  plan            String
  amount          Float
  currency        String
  dailyRate       Float
  duration        Int
  expectedProfit  Float
  totalReturn     Float
  address         String
  reference       String    @unique
  status          String    @default("pending")
  txHash          String?
  receivedAmount  Float?
  providerPayload Json?
  expiresAt       DateTime?
  startedAt       DateTime?
  maturesAt       DateTime?
  createdAt       DateTime  @default(now())
  confirmedAt     DateTime?
  completedAt     DateTime?
}

model Withdrawal {
  id            String    @id(map: "Withdrawal_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  transactionId String    @unique(map: "Withdrawal_transactionId_key")
  amount        Decimal   @db.Decimal(10, 2)
  walletAddress String
  email         String
  status        String    @default("pending")
  approvedAt    DateTime? @db.Timestamp(6)
  rejectedAt    DateTime? @db.Timestamp(6)
  createdAt     DateTime? @default(now()) @db.Timestamp(6)
  updatedAt     DateTime? @default(now()) @updatedAt @db.Timestamp(6)

  @@map("withdrawal")
}
